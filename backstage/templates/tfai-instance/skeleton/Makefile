# ${{ values.instanceName }} â€” TF-AI Instance
# Generated by Backstage scaffolder template.

.PHONY: up down run logs ingest-all

up: ## Start supporting services (Qdrant, Langfuse)
	docker compose up -d

down: ## Stop all services
	docker compose down

run: up ## Start TF-AI (pulls latest image)
	docker compose up -d tfai
	@echo "TF-AI is running at http://localhost:${{ values.serverPort }}"

logs: ## Tail all service logs
	docker compose logs -f

ingest-all: ## Ingest all provider docs into Qdrant
	docker compose exec tfai tfai ingest \
	  --url https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/eks_cluster \
	  --url https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc \
	  --url https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role \
	  --url https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster \
	  --url https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/container_cluster
